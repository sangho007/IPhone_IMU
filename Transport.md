## 통신 설정 요약

- **전송 프로토콜**: TCP (usbmuxd/iproxy를 통해 `localhost`에서 수신자와 터널링)
- **호스트 주소**: `127.0.0.1`  
  - 실 기기 ↔ 맥 간 USB 연결 후 `iproxy 4820 4820` 실행을 가정
- **포트**: `4820`

## 페이로드 포맷

- **전송 주기**: 최소 30 Hz  
  - 앱 내부 타이머가 1/30초마다 DTO를 인코딩
- **프레이밍**: 길이 + 본문
  1. 4바이트 `uint32` 길이 헤더 (전송할 프로토버퍼 페이로드의 바이트 수)
  2. 길이만큼의 프로토버퍼 인코딩 페이로드
  - **엔디언**: 길이 헤더는 Big-Endian (`UInt32.bigEndian`)

- **메시지 직렬화**: 커스텀 프로토콜 버퍼 인코더  
  - `TelemetryProtobufEncoder`가 JSON 대신 DTO 구조를 protobuf wire format으로 변환
  - 메시지 구조는 `schema_version`, `header`, `status`, `pose_world_phone` 등 DTO 필드와 1:1 매핑

## 연결 및 재시도 규칙

- 앱에서 “수집 시작” 버튼 누를 때 연결 시도
- 실패 시 최대 5회까지 재시도 (기본 1.5초 간격)
- 연결이 준비되면 센서 수집과 전송을 동시에 시작
- 전송 중 에러 발생 시 연결 종료 후 재시도 루프 재개

## 기타 주의 사항

- 시뮬레이터에서는 ARKit/CoreMotion/네트워크 흐름이 모두 작동하지 않으므로 실 기기에서만 확인
- 수신 측에서도 4바이트 길이 헤더를 Big-Endian으로 디코딩한 뒤 protobuf 파서를 적용해야 함
